<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<title>MimosaShop2026 - Market</title>
<style>
body { font-family: Arial, sans-serif; margin:0; background:#121212; color:#eee; }
header { background:#1f1f1f; color:#f5a623; padding:20px; text-align:center; font-size:28px; font-weight:bold; }
.controls { display:flex; justify-content:center; gap:10px; flex-wrap:wrap; margin:20px; }
.controls input, .controls select, .controls button { padding:6px; border-radius:6px; border:1px solid #333; background:#121212; color:#eee; }
.products-grid { display:grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap:20px; padding:20px; }
.product-card { background:#1f1f1f; padding:15px; border-radius:12px; box-shadow:0 4px 10px rgba(0,0,0,0.5); transition: transform 0.2s; }
.product-card:hover { transform: scale(1.05); }
.product-card img { width:100%; height:200px; object-fit:cover; border-radius:10px; }
.product-card h3 { margin:10px 0 5px; color:#f5a623; }
.product-card p { margin:5px 0; font-weight:bold; }
.btn-buy { display:inline-block; padding:8px 15px; background:#f5a623; color:#121212; text-decoration:none; border-radius:6px; margin-top:5px; cursor:pointer; transition: background 0.2s; }
.btn-buy:hover { background:#f39c12; }
.admin-section { padding:20px; background:#1f1f1f; margin:20px; border-radius:12px; box-shadow:0 4px 10px rgba(0,0,0,0.5); }
table { width:100%; border-collapse: collapse; margin-top:20px; color:#eee; }
th, td { border:1px solid #333; padding:10px; text-align:center; }
th { background:#2a2a2a; }
button { padding:6px 12px; border:none; border-radius:6px; cursor:pointer; transition: background 0.2s; }
button.delete { background:#e74c3c; color:#fff; }
button.delete:hover { background:#c0392b; }
button.add { background:#27ae60; color:#fff; }
button.add:hover { background:#2ecc71; }
input { width:90%; margin:5px 0; }
h2,h3 { color:#f5a623; }
</style>
</head>
<body>

<header>MimosaShop2026</header>

<!-- Ø¨Ø­Ø« ÙˆÙØ±Ø² -->
<div class="controls">
  <input type="text" id="search-name" placeholder="Ø§Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ù…Ù†ØªØ¬...">
  <input type="number" id="price-min" placeholder="Ø§Ù„Ø³Ø¹Ø± Ù…Ù†">
  <input type="number" id="price-max" placeholder="Ø¥Ù„Ù‰">
  <select id="sort-price">
    <option value="">ØªØ±ØªÙŠØ¨ Ø­Ø³Ø¨ Ø§Ù„Ø³Ø¹Ø±</option>
    <option value="asc">ØªØµØ§Ø¹Ø¯ÙŠ</option>
    <option value="desc">ØªÙ†Ø§Ø²Ù„ÙŠ</option>
  </select>
  <button onclick="applyFilters()">ØªØ·Ø¨ÙŠÙ‚</button>
  <button onclick="resetFilters()">Ø¥Ø¹Ø§Ø¯Ø© Ø¶Ø¨Ø·</button>
</div>

<div class="products-grid" id="products-container"></div>

<div class="admin-section">
<h2>Ù„ÙˆØ­Ø© Ø§Ù„Ø£Ø¯Ù…Ù†</h2>

<h3>Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬ Ø¬Ø¯ÙŠØ¯</h3>
<form id="form-add-product">
  <input type="text" id="new-name" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬" required>
  <input type="number" step="0.01" id="new-price" placeholder="Ø§Ù„Ø³Ø¹Ø±" required>
  <input type="file" id="new-image" accept="image/*" required>
  <button class="add">Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù†ØªØ¬</button>
</form>

<h3>Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª</h3>
<table id="table-products">
<thead><tr><th>Ø±Ù‚Ù…</th><th>Ø§Ù„Ø§Ø³Ù…</th><th>Ø§Ù„Ø³Ø¹Ø±</th><th>Ø§Ù„ØµÙˆØ±Ø©</th><th>Ø­Ø°Ù</th></tr></thead>
<tbody></tbody>
</table>

<h3>Ø§Ù„Ø·Ù„Ø¨Ø§Øª</h3>
<table id="table-orders">
<thead><tr><th>Ø±Ù‚Ù…</th><th>Ø§Ù„Ù…Ù†ØªØ¬</th><th>Ø§Ù„Ø§Ø³Ù…</th><th>Ø§Ù„Ù…ÙˆÙ‚Ø¹</th><th>Ø§Ù„Ø¹Ù†ÙˆØ§Ù†</th></tr></thead>
<tbody></tbody>
</table>

</div>

<script>
// ===== Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† LocalStorage =====
let products = JSON.parse(localStorage.getItem("products")) || [
  {name:"Ù…Ù†ØªØ¬ 1", price:14.99, image:"https://via.placeholder.com/300x200?text=Product1"},
  {name:"Ù…Ù†ØªØ¬ 2", price:9.99, image:"https://via.placeholder.com/300x200?text=Product2"}
];
let orders = JSON.parse(localStorage.getItem("orders")) || [];

// ===== Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª =====
function saveData(){
  localStorage.setItem("products", JSON.stringify(products));
  localStorage.setItem("orders", JSON.stringify(orders));
}

// ===== Ø¹Ø±Ø¶ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª =====
function renderProducts(list=products) {
  const container = document.getElementById("products-container");
  container.innerHTML = "";
  list.forEach((p,i)=>{
    container.innerHTML += `
    <div class="product-card">
      <img src="${p.image}" alt="${p.name}">
      <h3>${p.name}</h3>
      <p>Ø§Ù„Ø³Ø¹Ø±: ${p.price}$</p>
      <button class="btn-buy" onclick="buyProduct(${i})">Ø´Ø±Ø§Ø¡</button>
    </div>`;
  });
}

// ===== Ø´Ø±Ø§Ø¡ Ù…Ù†ØªØ¬ =====
function buyProduct(index) {
  const name = prompt("Ø§Ù„Ø§Ø³Ù…:");
  const loc = prompt("Ø§Ù„Ù…Ø¯ÙŠÙ†Ø© / Ø§Ù„Ù…ÙˆÙ‚Ø¹:");
  const add = prompt("Ø§Ù„Ø¹Ù†ÙˆØ§Ù†:");
  if(name && loc && add){
    orders.push({id:orders.length+1, product:products[index].name, name:name, loc:loc, add:add});
    alert("âœ… ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø·Ù„Ø¨Ùƒ!");
    renderDashboard();
    saveData();
  }
}

// ===== Ù„ÙˆØ­Ø© Ø§Ù„Ø£Ø¯Ù…Ù† =====
function renderDashboard(){
  // Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª
  const pt = document.querySelector("#table-products tbody");
  pt.innerHTML = "";
  products.forEach((p,i)=>{
    pt.innerHTML += `<tr>
      <td>${i+1}</td>
      <td>${p.name}</td>
      <td>${p.price}$</td>
      <td><img src="${p.image}" width="60"></td>
      <td><button class="delete" onclick="deleteProduct(${i})">ğŸ—‘ï¸ Ø­Ø°Ù</button></td>
    </tr>`;
  });
  // Ø§Ù„Ø·Ù„Ø¨Ø§Øª
  const ot = document.querySelector("#table-orders tbody");
  ot.innerHTML = "";
  orders.forEach(o=>{
    ot.innerHTML += `<tr><td>${o.id}</td><td>${o.product}</td><td>${o.name}</td><td>${o.loc}</td><td>${o.add}</td></tr>`;
  });
}

// ===== Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬ Ù…Ù† ØµÙˆØ±Ø© Ù…Ø­Ù„ÙŠØ© =====
document.getElementById("form-add-product").addEventListener("submit", function(e){
  e.preventDefault();
  const n = document.getElementById("new-name").value;
  const pr = parseFloat(document.getElementById("new-price").value);
  const file = document.getElementById("new-image").files[0];

  if(file){
    const reader = new FileReader();
    reader.onload = function(event){
      const im = event.target.result; // Ø§Ù„ØµÙˆØ±Ø© ÙƒÙ€ base64
      products.push({name:n, price:pr, image:im});
      renderProducts();
      renderDashboard();
      saveData();
      e.target.reset();
    }
    reader.readAsDataURL(file);
  }
});

// ===== Ø­Ø°Ù Ù…Ù†ØªØ¬ =====
function deleteProduct(i){
  if(confirm("âŒ Ù‡Ù„ ØªØ±ÙŠØ¯ Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ù…Ù†ØªØ¬ØŸ")){
    products.splice(i,1);
    renderProducts();
    renderDashboard();
    saveData();
  }
}

// ===== ÙÙ„ØªØ±Ø© ÙˆØ¨Ø­Ø« =====
function applyFilters(){
  let name = document.getElementById("search-name").value.toLowerCase();
  let min = parseFloat(document.getElementById("price-min").value);
  let max = parseFloat(document.getElementById("price-max").value);
  let sort = document.getElementById("sort-price").value;

  let filtered = products.filter(p=>{
    return (!name || p.name.toLowerCase().includes(name)) &&
           (isNaN(min) || p.price >= min) &&
           (isNaN(max) || p.price <= max);
  });

  if(sort==="asc") filtered.sort((a,b)=>a.price-b.price);
  if(sort==="desc") filtered.sort((a,b)=>b.price-a.price);

  renderProducts(filtered);
}

// ===== Ø¥Ø¹Ø§Ø¯Ø© Ø¶Ø¨Ø· =====
function resetFilters(){
  document.getElementById("search-name").value="";
  document.getElementById("price-min").value="";
  document.getElementById("price-max").value="";
  document.getElementById("sort-price").value="";
  renderProducts();
}

// ===== ØªØ´ØºÙŠÙ„ Ø§Ù„Ø¹Ø±Ø¶ =====
renderProducts();
renderDashboard();
</script>

</body>
</html>
